<link href="https://img.shop-pro.jp/tmpl_js/86/slick.css" rel="stylesheet" type="text/css">
<link href="https://img.shop-pro.jp/tmpl_js/86/slick-theme.css" rel="stylesheet" type="text/css">

<div class="min-h-screen bg-gradient-to-b from-white via-gray-50/30 to-white">
  <!-- パンくずリスト -->
  <div class="bg-gradient-to-r from-gray-50 to-white border-b border-gray-200">
    <div class="max-w-7xl mx-auto px-4 py-4">
      <ul class="flex items-center space-x-2 text-sm">
        <li class="flex items-center">
          <a href="<{$home_url}>" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">
            ホーム
          </a>
        </li>
        <{if $bid_name != ""}>
        <li class="flex items-center">
          <svg class="w-4 h-4 text-gray-400 mx-2" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
          </svg>
          <a href="<{$bid_link}>" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">
            <{$bid_name}>
          </a>
        </li>
        <{/if}>
        <{if $sid_name != ""}>
        <li class="flex items-center">
          <svg class="w-4 h-4 text-gray-400 mx-2" fill="currentColor" viewBox="0 0 20 20">
            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
          </svg>
          <a href="<{$sid_link}>" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">
            <{$sid_name}>
          </a>
        </li>
        <{/if}>
      </ul>
    </div>
  </div>
  <!-- //パンくずリスト -->
  <{if $product.id != ""}>
  <div class="max-w-7xl mx-auto px-4 py-8">
    <form name="product_form" method="post" action="<{$cart_url}>">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-16">
        <!-- 商品画像 -->
        <div class="space-y-6">
          <div class="bg-white overflow-hidden">
            <div class="aspect-square overflow-hidden">
              <div class="p-product-img__main js-images-slider">
                <div class="p-product-img__main-item aspect-square">
                  <{if $product.img_url != ""}>
                  <img src="<{$product.img_url}>" alt="<{$productlist[num].name|escape:'html'}>" class="w-full h-full object-cover hover:scale-110 transition-transform duration-500" />
                  <{else}>
                  <img src="https://img.shop-pro.jp/tmpl_img/86/no-image.jpg" alt="<{$productlist[num].name|escape:'html'}>" class="w-full h-full object-cover hover:scale-110 transition-transform duration-500" />
                  <{/if}>
                </div>
                <{if $otherimg_num != 0}>
                <{section name=num loop=$otherimg}>
                  <{if $otherimg[num].url != ""}>
                  <div class="p-product-img__main-item aspect-square">
                    <img src="<{$otherimg[num].url}>" alt="<{$productlist[num].name|escape:'html'}>" class="w-full h-full object-cover hover:scale-110 transition-transform duration-500" />
                  </div>
                  <{/if}>
                <{/section}>
                <{/if}>
              </div>
            </div>
          </div>
          <{if $otherimg_num != 0}>
          <div class="bg-gray-50 p-4">
            <div class="overflow-x-auto">
              <ul class="p-product-thumb-list flex space-x-3">
                <{if $product.img_url != ""}>
                <li class="p-product-thumb-list__item flex-shrink-0">
                  <div class="w-20 h-20 overflow-hidden border-2 border-transparent hover:border-sdgs-orange transition-all duration-300 cursor-pointer">
                    <img src="<{$product.img_url}>" alt="<{$productlist[num].name|escape:'html'}>" class="w-full h-full object-cover" />
                  </div>
                </li>
                <{/if}>
                <{section name=num loop=$otherimg}>
                  <{if $otherimg[num].url != ""}>
                  <li class="p-product-thumb-list__item flex-shrink-0">
                    <div class="w-20 h-20 overflow-hidden border-2 border-transparent hover:border-sdgs-orange transition-all duration-300 cursor-pointer">
                      <img src="<{$otherimg[num].url}>" alt="<{$productlist[num].name|escape:'html'}>" class="w-full h-full object-cover" />
                    </div>
                  </li>
                  <{/if}>
                <{/section}>
              </ul>
            </div>
          </div>
          <{/if}>
        </div>
        <!-- // 商品画像 -->
        <!-- 商品情報 -->
        <div class="space-y-8">
          <div class="bg-white p-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-4 leading-tight">
              <{$product_name}>
            </h2>
            <!-- 型番 -->
            <div class="text-sm text-gray-500 mb-6 font-medium">
              <{$product.model}>
            </div>
            <!-- //型番 -->
            <!-- 価格・定価 -->
            <div class="relative mb-8">
              <{if $members_login_flg == true && $product.discount_flg == true}>
              <div class="bg-gradient-to-r from-sdgs-red/10 to-sdgs-orange/10 p-6 border-l-4 border-sdgs-red">
                <div class="text-2xl font-bold text-sdgs-red mb-2">
                  <{$product.sales}>
                </div>
                <div class="text-sdgs-bright-orange font-semibold text-lg mb-2">
                  <{$product.discount_rate}>OFF
                </div>
              </div>
              <{else}>
              <div class="bg-gradient-to-r from-sdgs-blue/10 to-sdgs-light-blue/10 p-6 border-l-4 border-sdgs-blue">
                <div class="text-2xl font-bold text-sdgs-blue">
                  <{$product.sales}>
                </div>
              </div>
              <{/if}>
              <{if $members_login_flg == true && $product.discount_flg == true}>
              <div class="mt-4 text-gray-600 line-through">
                通常価格：<{$product.regular_price}>
              </div>
              <{/if}>
              <{if $product.price_disp}>
              <div class="mt-2 text-gray-500 text-sm">
                定価：<{$product.price}>
              </div>
              <{/if}>
            </div>
            <!-- // 価格・定価 -->
            <!-- オプション情報 -->
            <{if $opt_url != ""}>
            <div class="mb-8">
              <{if $option_output_mode}>
              <{* 表形式 *}>
              <div class="bg-gray-50 p-6 mb-6" id="prd-opt-table">
                <{$option_table}>
              </div>
              <div class="space-y-4" id="prd-opt-select">
                <{section name=num loop=$option}>
                <div class="bg-gray-50 p-4">
                  <div class="font-semibold text-gray-800 mb-3">
                    <{$option[num].name}>
                  </div>
                  <select name="<{$option[num].select_name}>" class="product_cart_select w-full px-4 py-3 border-2 border-gray-200 focus:outline-none focus:ring-4 focus:ring-sdgs-blue/20 focus:border-sdgs-blue transition-all duration-300">
                    <{html_options values=$option_value[num].id output=$option_value[num].name selected=$key}>
                  </select>
                </div>
                <{/section}>
              </div>
              <{else}>
              <{* セレクトメニュー *}>
              <div class="space-y-4">
                <{section name=num loop=$option}>
                <div class="bg-gray-50 p-4">
                  <div class="font-semibold text-gray-800 mb-3">
                    <{$option[num].name}>
                  </div>
                  <select name="<{$option[num].select_name}>" class="product_cart_select w-full px-4 py-3 border-2 border-gray-200 focus:outline-none focus:ring-4 focus:ring-sdgs-blue/20 focus:border-sdgs-blue transition-all duration-300">
                    <{html_options values=$option_value[num].id output=$option_value[num].name selected=$key}>
                  </select>
                </div>
                <{/section}>
              </div>
              <{/if}>
            </div>
            <{/if}>
            <!-- // オプション情報 -->
            <!-- 名入れ設定 -->
            <{if $product.product_text_titles}>
            <div class="mb-8 space-y-4">
              <{foreach from=$product.product_text_titles key=key item=val}>
              <div class="bg-gray-50 p-4">
                <div class="font-semibold text-gray-800 mb-3">
                  <{$val|escape}>
                </div>
                <input type="text" name="product_text[<{$key|escape}>]" value="" class="w-full px-4 py-3 border-2 border-gray-200 focus:outline-none focus:ring-4 focus:ring-sdgs-blue/20 focus:border-sdgs-blue transition-all duration-300" />
              </div>
              <{/foreach}>
            </div>
            <{/if}>
            <!-- //名入れ設定 -->
            <!-- 購入フォーム -->
            <div class="space-y-6">
              <{if !$shop_stop_flg && $product.soldout_flg == 0 && !$product.login_sale_flg}>
              <div class="bg-gray-50 p-6">
                <div class="flex items-center space-x-4 mb-4">
                  <input type="text" name="product_num" value="<{$product.init_num}>" class="w-24 px-4 py-3 border-2 border-gray-200 text-center font-semibold focus:outline-none focus:ring-4 focus:ring-sdgs-blue/20 focus:border-sdgs-blue transition-all duration-300" />
                  <span class="text-gray-600 font-medium"><{$product.unit}></span>
                </div>
                <{if $product.stock_disp}>
                <div class="text-sm text-gray-600">
                  在庫：<{$product.stock_str}>
                </div>
                <{/if}>
              </div>
              <{/if}>
              
              <div class="space-y-4">
                <{if $product.soldout_flg == 0 && !$shop_stop_flg && !$product.login_sale_flg}>
                  <{if $is_enable_async_cart_in_pc}>
                    <button type="submit" class="w-full bg-gradient-to-r from-sdgs-green to-sdgs-light-green text-white font-bold py-4 px-8 hover:opacity-90 transition-all duration-300 flex items-center justify-center space-x-3 text-lg">
                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15.5M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"></path>
                      </svg>
                      <span>カートに入れる</span>
                    </button>
                  <{else}>
                    <div class="disable_cartin">
                      <button class="w-full bg-gradient-to-r from-sdgs-green to-sdgs-light-green text-white font-bold py-4 px-8 hover:opacity-90 transition-all duration-300 flex items-center justify-center space-x-3 text-lg" type="submit">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15.5M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"></path>
                        </svg>
                        <span>カートに入れる</span>
                      </button>
                    </div>
                  <{/if}>
                  <p class="p-product-form__error-message stock_error text-red-500 text-sm"></p>
                  <{else}>
                  <{if $product.soldout_flg}>
                    <button class="w-full bg-gray-400 text-white font-bold py-4 px-8 cursor-not-allowed text-lg" type="button" disabled="disabled">
                      SOLD OUT
                    </button>
                  <{elseif $product.login_sale_flg}>
                    <div class="w-full bg-gradient-to-r from-sdgs-purple to-sdgs-pink text-white font-bold py-4 px-8 text-center text-lg flex items-center justify-center space-x-3">
                      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-1.5 6M7 13l-1.5-6m0 0h15.5M17 13v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6"></path>
                      </svg>
                      <span>会員のみ購入できます</span>
                    </div>
                  <{/if}>
                <{/if}>
                <{if $shop_stop_flg}>
                  <button class="w-full bg-gray-400 text-white font-bold py-4 px-8 cursor-not-allowed text-lg" type="button" disabled="disabled">
                    休止中
                  </button>
                <{/if}>
              </div>
            </div>
            <!-- // 購入フォーム -->
            <!-- 商品用ソーシャルボタン -->
            <div class="flex justify-center space-x-6 mt-8">
              <a href="#" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 p-2 rounded-full hover:bg-gray-100">
                <{* line *}><{$line_button}>
              </a>
              <a href="#" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 p-2 rounded-full hover:bg-gray-100">
                <{* facebook_share *}><{facebook_share}>
              </a>
              <a href="#" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 p-2 rounded-full hover:bg-gray-100">
                <{* twitter *}><{twitter_tweet}>
              </a>
            </div>
            <!-- // 商品用ソーシャルボタン -->
            <div class="mt-8 pt-8 border-t border-gray-200">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <a href="<{$sk_url}>#return" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">返品について</a>
                <a href="<{$sk_url}>#info" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">特定商取引法に基づく表記</a>
                <{if $opt_url != ""}>
                <a href="<{$opt_url}>" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">オプションの値段詳細</a>
                <{/if}>
                <a href="<{$prod_inq_url}>" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">この商品について問い合わせる</a>
                <a href="<{$keep_shopping_url}>" class="text-sdgs-blue hover:text-sdgs-navy transition-colors duration-300 font-medium">買い物を続ける</a>
              </div>
            </div>
        </div><!-- /.p-product-info -->
      </div><!-- /.p-product-main -->
      <!-- // 商品情報・カート -->
      <div class="space-y-12">
        <!-- 商品説明 -->
        <div class="bg-white p-8">
          <h3 class="text-2xl font-bold bg-gradient-to-r from-sdgs-navy to-sdgs-blue bg-clip-text text-transparent mb-6">
            DETAIL
          </h3>
          <div class="prose max-w-none text-gray-700 leading-relaxed">
            <{$product.explain}>
          </div>
        </div>
        <!-- //商品説明 -->
        
        <!-- 組合せ購入 -->
        <{if $together_product_num != 0}>
        <div class="bg-white p-8">
          <h3 class="text-2xl font-bold bg-gradient-to-r from-sdgs-navy to-sdgs-blue bg-clip-text text-transparent mb-8">
            RECOMMENDED ITEM
          </h3>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            <{section name=num loop=$together_product}>
              <div class="bg-gray-50 overflow-hidden hover:bg-gray-100 transition-all duration-300">
                <div class="aspect-square overflow-hidden">
                  <a href="<{$together_product[num].link_url}>">
                    <{if $together_product[num].img_url != ""}>
                      <img src="<{$together_product[num].img_url}>" alt="<{$together_product[num].name|escape:'html'}>" class="w-full h-full object-cover hover:scale-110 transition-transform duration-500" />
                    <{else}>
                      <img src="https://img.shop-pro.jp/tmpl_img/76/noimage.png" alt="<{$together_product[num].name|escape:'html'}>" class="w-full h-full object-cover hover:scale-110 transition-transform duration-500" />
                    <{/if}>
                  </a>
                </div>
                <div class="p-4">
                  <div class="font-medium text-gray-800 mb-2 hover:text-sdgs-green transition-colors">
                    <a href="<{$together_product[num].link_url}>">
                      <{$together_product[num].name}>
                    </a>
                  </div>
                  <{if !$together_product[num].soldout_flg}>
                  <div class="flex items-center space-x-2">
                    <span class="font-bold text-sdgs-blue"><{$together_product[num].price}></span>
                    <{if $members_login_flg && $together_product[num].discount_flg}>
                    <span class="bg-sdgs-red text-white px-2 py-1 text-xs font-bold"><{$together_product[num].discount_rate}>OFF</span>
                    <{/if}>
                  </div>
                  <{if $members_login_flg && $together_product[num].discount_flg}>
                  <div class="text-sm text-gray-500 line-through">
                    <{$together_product[num].regular_price}>
                  </div>
                  <{/if}>
                  <{else}>
                  <div class="text-gray-500 font-medium">
                    SOLD OUT
                  </div>
                  <{/if}>
                  <{if $together_product[num].s_expl != ""}>
                  <div class="text-sm text-gray-600 mt-2">
                    <{$together_product[num].s_expl}>
                  </div>
                  <{/if}>
                </div>
              </div>
            <{/section}>
          </div>
        </div>
        <{/if}>
        <!-- //組合せ購入 -->
        <!-- レビュー -->
        <{if $review_use_flg}>
        <div class="bg-white p-8">
          <h3 class="text-2xl font-bold bg-gradient-to-r from-sdgs-navy to-sdgs-blue bg-clip-text text-transparent mb-8">
            REVIEW
          </h3>
          <div class="space-y-8">
            <{section name=num loop=$reviewlist}>
            <div class="bg-gray-50 p-6">
              <div class="flex items-start justify-between mb-4">
                <div class="flex items-center space-x-2">
                  <{section name=star start=0 loop=$review_star_num step=1}>
                    <{if $reviewlist[num].star > $smarty.section.star.index}>
                    <svg class="w-5 h-5 text-sdgs-yellow fill-current" viewBox="0 0 20 20">
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                    </svg>
                    <{else}>
                    <svg class="w-5 h-5 text-gray-300 fill-current" viewBox="0 0 20 20">
                      <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
                    </svg>
                    <{/if}>
                  <{/section}>
                </div>
                <div class="text-sm text-gray-500">
                  <{$reviewlist[num].date}>
                </div>
              </div>
              <{if $reviewlist[num].title != ""}>
              <div class="font-semibold text-gray-800 mb-3">
                <{$reviewlist[num].title}>
              </div>
              <{/if}>
              <div class="text-sm text-gray-600 mb-3">
                <{if $reviewlist[num].nickname != ""}><{$reviewlist[num].nickname}> <{/if}>
                <{if $reviewlist[num].nendai != ""}> <{$reviewlist[num].nendai}> <{/if}>
                <{if $reviewlist[num].sex != ""}> <{$reviewlist[num].sex}> <{/if}>
              </div>
              <{if $reviewlist[num].img_url != ""}>
              <div class="mb-4">
                <img src="<{$reviewlist[num].img_url}>" class="rounded-lg max-w-xs" />
              </div>
              <{/if}>
              <div class="text-gray-700 leading-relaxed mb-4">
                <{$reviewlist[num].comment}>
              </div>
              <!-- ショップからの返信コメント-->
              <{if $reviewlist[num].res_date != ""}>
              <div class="bg-white p-4 border-l-4 border-sdgs-blue">
                <div class="font-semibold text-sdgs-blue mb-2">
                  ショップからのコメント
                </div>
                <div class="text-gray-700 mb-2">
                  <{$reviewlist[num].res_comment}>
                </div>
                <div class="text-sm text-gray-500">
                  <{$reviewlist[num].res_date}>
                </div>
              </div>
              <{/if}>
            </div>
            <{/section}>
          </div>
          <div class="text-center mt-8">
            <a href="<{$review_send_url}>" class="inline-flex items-center px-8 py-3 bg-gradient-to-r from-sdgs-orange to-sdgs-bright-orange text-white font-bold hover:opacity-90 transition-all duration-300">
              WRITE REVIEW
              <svg class="w-5 h-5 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </a>
          </div>
        </div>
        <{/if}>
        <!-- //レビュー -->
      </div>
      <{$product.info}>
    </form>
  </div>
<{else}>
  <{if $product.hide_flg == true}>
  <div class="max-w-7xl mx-auto px-4 py-16">
    <div class="bg-white p-12 text-center">
      <p class="text-xl text-gray-600">この商品を閲覧するにはログインが必要です。</p>
    </div>
  </div>
  <{else}>
  <div class="max-w-7xl mx-auto px-4 py-16">
    <div class="bg-white p-12 text-center">
      <p class="text-xl text-gray-600">現在、この商品は扱っておりません。</p>
    </div>
  </div>
  <{/if}>
<{/if}>
</div>
<{* ↓↓ デバイスサイズ変更時にオプション選択フォームの表示切替に使用 ↓↓ *}>
<{if $option_output_mode}>
  <div class="hide">
    <div class="prd-opt-select">
      <{section name=num loop=$option}>
      <div class="p-product-option-select__box">
        <div class="p-product-option-select__ttl">
          <{$option[num].name}>
        </div>
        <select name="<{$option[num].select_name}>" class="product_cart_select">
          <{html_options values=$option_value[num].id output=$option_value[num].name selected=$key}>
        </select>
      </div>
      <{/section}>
    </div>
    <div class="prd-opt-table">
      <{$option_table}>
    </div>
  </div>
<{/if}>

<script src="https://img.shop-pro.jp/tmpl_js/86/slick.min.js"></script>

<script type="text/javascript">
$(document).on("ready", function() {
  var slider = ".js-images-slider";
  var thumbnailItem = ".p-product-thumb-list__item";

  $(thumbnailItem).each(function() {
    var index = $(thumbnailItem).index(this);
    $(this).attr("data-index",index);
  });

  $(slider).on('init',function(slick) {
    var index = $(".slide-item.slick-slide.slick-current").attr("data-slick-index");
    $(thumbnailItem+'[data-index="'+index+'"]').addClass("is-current");
  });

  $(slider).slick( {
    autoplay: false,
    arrows: true,
    infinite: true
  });

  $(thumbnailItem).on('click',function() {
    var index = $(this).attr("data-index");
    $(slider).slick("slickGoTo",index,false);
  });

  $(slider).on('beforeChange',function(event,slick, currentSlide,nextSlide){
    $(thumbnailItem).each(function() {
      $(this).removeClass("is-current");
    });
    $(thumbnailItem+'[data-index="'+nextSlide+'"]').addClass("is-current");
  });
});
</script>
