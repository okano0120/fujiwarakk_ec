<div class="l-main product_list">
    <!-- パンくずリスト -->
    <div class="c-breadcrumbs u-container">
      <ul class="c-breadcrumbs-list">
        <li class="c-breadcrumbs-list__item">
          <a href="<{$home_url}>">
            ホーム
          </a>
        </li>
        <{if $smarty.get.mode != "grp"}>
        <{if $bid_name != ""}>
        <li class="c-breadcrumbs-list__item">
          <a href="<{$bid_link}>">
            <{$bid_name}>
          </a>
        </li>
        <{/if}>
        <{if $sid_name != ""}>
        <li class="c-breadcrumbs-list__item">
          <a href="<{$sid_link}>">
            <{$sid_name}>
          </a>
        </li>
        <{/if}>
        <{else}>
        <{section name=num loop=$group_breadcrumb}>
        <li class="c-breadcrumbs-list__item">
          <a href="<{$group_breadcrumb[num].link_url}>">
            <{$group_breadcrumb[num].name}>
          </a>
        </li>
        <{/section}>
        <{/if}>
      </ul>
    </div><!-- /.c-breadcrumbs -->
    <!-- //パンくずリスト -->
    <div class="l-contents-wrap u-container">
      <!-- メインカラム -->
      <div class="l-contents-main">
        <h2 class="p-category__ttl">
          <{if $sid_name != ""}>
            <{$sid_name}>
          <{elseif $bid_name != ""}>
            <{$bid_name}>
          <{else}>
            該当のカテゴリーがありません
          <{/if}>
        </h2>
        <!-- カテゴリー(大) フリースペース 1 -->
        <{if $category_desc_1}>
          <div class="p-category-free"><{$category_desc_1}></div>
        <{/if}>
        <!-- // カテゴリー(大) フリースペース 1 -->
        <!-- カテゴリー(小) フリースペース 1 -->
        <{if $subcategory_desc_1}>
          <div class="p-category-free"><{$subcategory_desc_1}></div>
        <{/if}>
        <!-- // カテゴリー(小) フリースペース 1 -->
        <!-- グループ フリースペース 1 -->
        <{if $group_desc_1}>
          <div class="p-category-free"><{$group_desc_1}></div>
        <{/if}>
        <!-- // グループ フリースペース 1 -->
        <!-- 小カテゴリーリスト -->
        <{if $subcategory_num != 0}>
        <h3 class="u-visually-hidden">
          カテゴリー一覧
        </h3>
        <ul class="p-category-list">
          <{section name=num loop=$sub_category}>
          <li class="p-category-list__item">
            <a class="p-category-list__link" href="<{$sub_category[num].link_url}>">
              <{if $sub_category[num].img_url != "" }>
              <span class="p-category-list__img">
                <img src="<{$sub_category[num].img_url}>" alt="<{$sub_category[num].name|escape:'html'}>" />
              </span>
              <{/if}>
              <span class="p-category-list__name">
                <{$sub_category[num].name}>
              </span>
            </a>
          </li>
          <{/section}>
        </ul>
        <{/if}>
        <!-- // 小カテゴリーリスト -->
        <!-- 小グループリスト -->
        <{if $subgroup_num != 0}>
        <h3 class="u-visually-hidden">グループ一覧</h3>
        <ul class="p-category-list">
          <{section name=num loop=$sub_group}>
          <li class="p-category-list__item">
            <a class="p-category-list__link" href="<{$sub_group[num].link_url}>">
              <{if $sub_group[num].img_url != "" }>
              <span class="p-category-list__img">
                <img src="<{$sub_group[num].img_url}>" />
              </span>
              <{/if}>
              <span class="p-category-list__name">
                <{$sub_group[num].name}>
              </span>
            </a>
          </li>
          <{/section}>
        </ul>
        <{/if}>
        <!-- // 小グループリスト -->
        <{if $productlist_num != 0}>
          <div class="max-w-7xl mx-auto px-4 py-8">
            <div class="text-center mb-12">
              <h2 class="mb-6">
                <span class="block text-3xl font-bold bg-gradient-to-r from-sdgs-navy to-sdgs-blue bg-clip-text text-transparent mb-3">
                  PRODUCTS
                </span>
                <span class="text-lg text-gray-600">商品一覧</span>
              </h2>
              <div class="flex justify-center space-x-2 mb-8">
                <div class="w-4 h-1 bg-sdgs-red rounded-full"></div>
                <div class="w-4 h-1 bg-sdgs-orange rounded-full"></div>
                <div class="w-4 h-1 bg-sdgs-yellow rounded-full"></div>
                <div class="w-4 h-1 bg-sdgs-green rounded-full"></div>
                <div class="w-4 h-1 bg-sdgs-light-blue rounded-full"></div>
                <div class="w-4 h-1 bg-sdgs-blue rounded-full"></div>
                <div class="w-4 h-1 bg-sdgs-purple rounded-full"></div>
              </div>
            </div>
            
            <div class="p-item-list-head mb-8">
              <div class="p-item-list-num text-center text-gray-600 mb-4">
                全<{$productlist_num}>商品
              </div>
              <!-- ソート -->
              <ul class="p-item-sort-list flex justify-center space-x-6">
                <li class="p-item-sort-list__item">
                <{if $productlist_sort_now != ""}>
                  <a href="<{$productlist_sort_def}>" class="text-sdgs-blue hover:text-sdgs-green transition-colors">おすすめ順</a>
                  <{else}>
                  <span class="text-sdgs-green font-medium">おすすめ順</span>
                <{/if}>
                </li>
                <li class="p-item-sort-list__item">
                <{if $productlist_sort_now != "p"}>
                  <a href="<{$productlist_sort_price}>" class="text-sdgs-blue hover:text-sdgs-green transition-colors">価格順</a>
                  <{else}>
                  <span class="text-sdgs-green font-medium">価格順</span>
                <{/if}>
                </li>
                <li class="p-item-sort-list__item">
                <{if $productlist_sort_now != "n"}>
                  <a href="<{$productlist_sort_new}>" class="text-sdgs-blue hover:text-sdgs-green transition-colors">新着順</a>
                  <{else}>
                  <span class="text-sdgs-green font-medium">新着順</span>
                <{/if}>
                </li>
              </ul>
              <!-- // ソート -->
            </div><!-- /.p-item-list-head -->
          <!-- 商品リスト -->
          <style>
          .price-badge-0 { background-color: var(--sdgs-red); }
          .price-badge-1 { background-color: var(--sdgs-orange); }
          .price-badge-2 { background-color: var(--sdgs-yellow); color: var(--sdgs-dark-blue); }
          .price-badge-3 { background-color: var(--sdgs-green); }
          .price-badge-4 { background-color: var(--sdgs-light-blue); }
          .price-badge-5 { background-color: var(--sdgs-purple); }
          .price-badge-6 { background-color: var(--sdgs-pink); }
          .price-badge-7 { background-color: var(--sdgs-bright-orange); }
          </style>
          <ul class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-8 max-w-7xl mx-auto px-4">
            <{section name=num loop=$productlist}>
            <li class="group">
              <div class="bg-white rounded-xl shadow-lg hover:shadow-xl border border-gray-200 hover:border-gray-300 transition-all duration-300 transform hover:-translate-y-2 overflow-hidden relative">
                <div class="aspect-square overflow-hidden rounded-t-xl">
                  <a href="<{$productlist[num].link_url}>">
                    <{if $productlist[num].img_url != ""}>
                    <img src="<{$productlist[num].img_url}>" alt="<{$productlist[num].name|escape:'html'}>" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" />
                    <{else}>
                    <img src="https://img.shop-pro.jp/tmpl_img/86/no-image.jpg" alt="<{$productlist[num].name|escape:'html'}>" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" />
                    <{/if}>
                  </a>
                </div>
                
                <{if !$productlist[num].soldout_flg}>
                <!-- カラフルな価格バッジ -->
                <div class="absolute top-3 right-3 price-badge-<{$smarty.section.num.index % 8}> text-white px-3 py-1 rounded-full shadow-lg transform rotate-12 group-hover:rotate-0 transition-transform duration-300">
                  <span class="font-bold text-sm"><{$productlist[num].price}></span>
                </div>
                <{else}>
                <{* 売り切れの表記 *}>
                <div class="absolute top-3 right-3 bg-gray-500 text-white px-3 py-1 rounded-full shadow-lg">
                  <span class="font-bold text-sm">SOLD OUT</span>
                </div>
                <{/if}>
                
                <div class="p-5">
                  <div class="text-center mb-4">
                    <a href="<{$productlist[num].link_url}>" class="text-gray-700 hover:text-sdgs-green transition-colors font-medium text-sm leading-relaxed">
                      <{$productlist[num].name}>
                    </a>
                  </div>
                  
                  <{if !$productlist[num].soldout_flg}>
                  <{if $members_login_flg && $productlist[num].discount_flg}>
                  <div class="text-center mb-2">
                    <div class="text-sdgs-bright-orange font-bold text-sm">
                      <{$productlist[num].discount_rate}>OFF
                    </div>
                  </div>
                  <{/if}>
                  <{* 通常販売価格（ログイン時、通常販売価格と会員価格が異なる場合のみ） *}>
                  <{if $members_login_flg && $productlist[num].discount_flg}>
                  <div class="text-center mb-2">
                    <div class="text-gray-400 line-through text-xs">
                      <{$productlist[num].regular_price}>
                    </div>
                  </div>
                  <{/if}>
                  <{/if}>
                  
                  <{* 簡易説明文 *}>
                  <{if $productlist[num].s_expl != ""}>
                  <div class="text-center text-gray-600 text-xs mt-2">
                    <{$productlist[num].s_expl}>
                  </div>
                  <{/if}>
                </div>
              </div>
            </li>
            <{/section}>
          </ul>
          <!-- // 商品リスト -->
          </div>
          <!-- ページャー -->
          <{if $productlist_total_pages != 1}>
            <div class="max-w-7xl mx-auto px-4 py-8">
              <div class="bg-white rounded-xl shadow-lg border border-gray-200 p-6">
                <div class="text-center text-gray-600 mb-6">
                  全<span class="font-bold text-sdgs-blue"><{$productlist_num}></span>商品中 <span class="font-bold text-sdgs-green"><{$productlist_snum}> - <{$productlist_enum}></span>表示
                </div>
                <ul class="flex justify-center items-center space-x-2 flex-wrap">
                  <li class="mb-2">
                    <{if $productlist_prev_page != ""}>
                    <a href="<{$productlist_prev_page}>" class="px-4 py-2 bg-sdgs-blue text-white rounded-lg hover:bg-sdgs-navy transition-colors">
                      前へ
                    </a>
                    <{else}>
                    <span class="px-4 py-2 bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed">
                      前へ
                    </span>
                    <{/if}>
                  </li>
                  <{section name=pager start=$productlist_first_page loop=$productlist_last_page+1}>
                  <{if $smarty.section.pager.first && $smarty.section.pager.index > 1}>
                  <li class="mb-2">
                    <a href="<{$productlist_link_base}>" class="px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">1</a>
                  </li>
                  <li class="mb-2">
                    <span class="px-2 py-2 text-gray-500">...</span>
                  </li>
                  <{/if}>
                  <{if $smarty.section.pager.index == $productlist_current_page}>
                  <li class="mb-2">
                    <span class="px-3 py-2 bg-sdgs-green text-white rounded-lg font-medium">
                      <{$smarty.section.pager.index}>
                    </span>
                  </li>
                  <{else}>
                  <li class="mb-2">
                    <a href="<{$productlist_link_base}>&page=<{$smarty.section.pager.index}>" class="px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                      <{$smarty.section.pager.index}>
                    </a>
                  </li>
                  <{/if}>
                  <{if $smarty.section.pager.last && $smarty.section.pager.index < $productlist_total_pages}>
                  <li class="mb-2">
                    <span class="px-2 py-2 text-gray-500">...</span>
                  </li>
                  <li class="mb-2">
                    <a href="<{$productlist_link_base}>&page=<{$productlist_total_pages}>" class="px-3 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                      <{$productlist_total_pages}>
                    </a>
                  </li>
                  <{/if}>
                  <{/section}>
                  <li class="mb-2">
                    <{if $productlist_next_page != ""}>
                    <a href="<{$productlist_next_page}>" class="px-4 py-2 bg-sdgs-blue text-white rounded-lg hover:bg-sdgs-navy transition-colors">
                      次へ
                    </a>
                    <{else}>
                    <span class="px-4 py-2 bg-gray-300 text-gray-500 rounded-lg cursor-not-allowed">
                      次へ
                    </span>
                    <{/if}>
                  </li>
                </ul>
              </div>
            </div>
          <{/if}>
          <!-- // ページャー -->
        <{else}>
          <{if $subcategory_num == 0 && $subgroup_num == 0}>
          <p class="c-not-found">
            該当する商品がありません
          </p>
          <{/if}>
        <{/if}>
        <!-- カテゴリー(大) フリースペース 2 -->
        <{if $category_desc_2}>
          <div class="p-category-free"><{$category_desc_2}></div>
        <{/if}>
        <!-- // カテゴリー(大) フリースペース 2 -->
        <!-- カテゴリー(小) フリースペース 2 -->
        <{if $subcategory_desc_2}>
          <div class="p-category-free"><{$subcategory_desc_2}></div>
        <{/if}>
        <!-- // カテゴリー(小) フリースペース 2 -->
        <!-- グループ フリースペース 2 -->
        <{if $group_desc_2}>
          <div class="p-category-free"><{$group_desc_2}></div>
        <{/if}>
        <!-- // グループ フリースペース 2 -->
      </div>
      <!-- サイドカラム -->
      <div class="l-contents-side">
        <!-- カテゴリーリスト -->
        <{section name=num loop=$category}>
        <{if $smarty.section.num.first }>
        <div class="l-side-navi">
          <h3 class="l-side-navi__ttl">
            カテゴリー
          </h3>
          <ul class="l-side-navi-list">
            <{foreach from=$category item=cate name=cate}>
            <li class="l-side-navi-list__item">
              <{if $subcategory[$cate.bid]}>
                <button class="l-side-navi-list__link js-toggle-btn">
                  <{$cate.name}>
                </button>
              <{else}>
                <a href="<{$cate.link_url}>" class="l-side-navi-list__link is-link">
                  <{$cate.name}>
                </a>
              <{/if}>
              <{foreach from=$subcategory[$cate.bid] item=scate name=scate}>
              <{if $smarty.foreach.scate.first}>
              <ul class="l-side-navi-sub-list js-toggle-contents">
                <li class="l-side-navi-sub-list__item">
                  <a href="<{$cate.link_url}>" class="l-side-navi-sub-list__link">
                    全ての<{$cate.name}>
                  </a>
                </li>
                <{/if}>
                <li class="l-side-navi-sub-list__item">
                  <a href="<{$scate.link_url}>" class="l-side-navi-sub-list__link">
                    <{$scate.name}>
                  </a>
                </li>
              <{if $smarty.foreach.scate.last}>
              </ul>
              <{/if}>
              <{/foreach}>
            </li>
            <{/foreach}>
          </ul>
        </div><!-- /.l-side-navi -->
        <{/if}>
        <{/section}>
        <!-- // カテゴリーリスト -->
        <!-- グループリスト -->
        <{section name=num loop=$group}>
        <{if $smarty.section.num.first }>
        <div class="l-side-navi">
          <h3 class="l-side-navi__ttl">
            グループ
          </h3>
          <ul class="l-side-navi-list">
        <{/if}>
            <li class="l-side-navi-list__item">
              <a href="<{$group[num].link_url}>" class="l-side-navi-list__link is-link">
                <{$group[num].name}>
              </a>
            </li>
        <{if $smarty.section.num.last }>
          </ul>
        </div><!-- /.l-side-navi -->
        <{/if}>
        <{/section}>
        <!-- //グループリスト -->
      </div><!-- /.l-contents-side -->
    </div><!-- /.l-contents-wrap -->
  </div>
  
  <script type="text/javascript">
  $(document).ready(function() {
    $(".js-toggle-btn").click(function () {
      $(this).next(".js-toggle-contents").slideToggle(200,"swing");
      $(this).toggleClass("is-on");
    });
  });
  </script>
  